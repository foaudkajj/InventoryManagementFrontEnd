<div id="maidDefenetion" class="page-layout carded fullwidth">

    <!-- TOP BACKGROUND -->
    <!-- <div class="top-bg accent"></div> -->
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center">

        <!-- CONTENT HEADER -->
        <!-- <div class="header accent p-24" fxLayout="row" fxLayoutAlign="start center">
            <h2 class="m-0">Full width with content scroll</h2>
        </div> -->
        <!-- / CONTENT HEADER -->

        <!-- CONTENT CARD -->
        <div class="content-card">

            <!-- CONTENT TOOLBAR -->
            <div class="toolbar primary px-24 py-8">
                <span>{{ 'FINANCE.TRANSACTION_CARD.TITLE' | translate}}</span>
            </div>
            <!-- / CONTENT TOOLBAR -->

            <!-- CONTENT -->
            <div class="example-container mat-elevation-z8">

                <dx-data-grid #grid id="gridContainer" [dataSource]="GridDs" [showBorders]="true"
                    [masterDetail]="{ enabled: true, template: 'transactionAccount' }">
                    <dxo-editing mode="popup" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="true">
                    </dxo-editing>
                    <dxi-column [caption]="'Id'" dataField="Id" dataType="number" [visible]=false
                        [formItem]="{visible:false}">
                    </dxi-column>
                    <!-- <dxi-column [caption]="'CreateDate'" dataType="date" dataField="Date" format="dd.MM.yyyy, HH:mm"
                        dataField="CreateDate"></dxi-column> -->
                    <dxi-column dataType="string" [caption]="'FINANCE.TRANSACTION_CARD.OWNER_NAME' | translate"
                        dataField="OwnerName">
                    </dxi-column>
                    <dxi-column dataType="string" [caption]="'Gsm'" dataField="Gsm"
                        [editorOptions]="{mask: '(000) 000-0000'}">
                    </dxi-column>
                    <dxi-column dataType="string" [caption]="'FINANCE.TRANSACTION_CARD.CURRENCY' | translate"
                        dataField="Currency">
                        <dxo-lookup [dataSource]="CurrenciesStore" displayExpr="Name" valueExpr="Id">
                        </dxo-lookup>
                    </dxi-column>
                    <dxi-column [caption]="'FINANCE.TRANSACTION_CARD.EMAIL' | translate" dataField="Email"
                        dataType="string">
                        <dxi-validation-rule type="email"></dxi-validation-rule>
                    </dxi-column>
                    <dxi-column dataType="string" [caption]="'FINANCE.TRANSACTION_CARD.CARD_CODE' | translate"
                        dataField="CardCode">
                    </dxi-column>
                    <div *dxTemplate="let data of 'transactionAccount'">
                        <dx-data-grid #grid id="masterDetailGridContainer" [remoteOperations]="true"
                            [dataSource]="TransactionAccountDS" [filterValue]="['TransactionCardId', '=', data.data.Id]"
                            [showBorders]="true">
                            <dxo-editing mode="popup" [allowUpdating]="false" [allowDeleting]="false"
                                [allowAdding]="false">
                            </dxo-editing>
                            <dxi-column [visible]="false"
                                [caption]="'FINANCE.TRANSACTION_ACCOUNT.TRANSACTION_CARD' | translate"
                                dataField="TransactionCardId" dataType="number">
                                <dxo-lookup [dataSource]="TransactionCardsStore" displayExpr="OwnerName" valueExpr="Id">
                                </dxo-lookup>
                            </dxi-column>
                            <dxi-column [caption]="'FINANCE.TRANSACTION_ACCOUNT.TRANSACTION_DATE' | translate"
                                dataType="date" dataField="Date" format="dd.MM.yyyy, HH:mm" dataField="TransactionDate">
                            </dxi-column>
                            <dxi-column [caption]="'FINANCE.TRANSACTION_ACCOUNT.TRANSACTION_TYPE' | translate"
                                dataField="TransactionType" dataType="number">
                                <dxo-lookup [dataSource]="TransactionTypeStore" [displayExpr]="getEnumTextTranslation"
                                    valueExpr="Id">
                                </dxo-lookup>
                            </dxi-column>
                            <dxi-column [caption]="'FINANCE.TRANSACTION_ACCOUNT.AMOUNT' | translate" dataField="Amount"
                                format="currency" dataType="number" alignment="left">
                                <dxo-format type="currency" precision="2"></dxo-format>
                            </dxi-column>
                            <dxi-column [caption]="'FINANCE.TRANSACTION_ACCOUNT.PAYMENT_METHOD' | translate"
                                dataField="PaymentMethod" dataType="number">
                                <dxo-lookup [dataSource]="PaymentMethodsStore" displayExpr="PaymentName" valueExpr="Id">
                                </dxo-lookup>
                            </dxi-column>
                            <dxi-column [caption]="'FINANCE.TRANSACTION_ACCOUNT.DESCRIPTION' | translate"
                                dataField="Description" dataType="string"></dxi-column>
                            <dxo-filter-row [visible]="true"></dxo-filter-row>
                            <dxo-header-filter [visible]="true"></dxo-header-filter>
                            <dxo-group-panel [visible]="false"></dxo-group-panel>
                            <dxo-grouping #expand [autoExpandAll]="false"></dxo-grouping>
                            <dxo-summary>
                                <dxi-total-item column="Amount" summaryType="TotalAmount"
                                    [valueFormat]="{type: 'currency', precision:2}">
                                </dxi-total-item>
                            </dxo-summary>
                        </dx-data-grid>
                    </div>
                    <dxo-filter-row [visible]="true"></dxo-filter-row>
                    <dxo-header-filter [visible]="true"></dxo-header-filter>
                    <dxo-group-panel [visible]="false"></dxo-group-panel>
                </dx-data-grid>

            </div>
        </div>
    </div>
</div>